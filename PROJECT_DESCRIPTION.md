# 📄 Pitch Mixer 작품 설명서 (Project Specification)

## 1. 개요 (Introduction)
**Pitch Mixer**는 인공지능 기술과 웹 오디오 처리 기술을 결합하여, 누구나 자신의 목소리나 특정 음성 샘플을 좋아하는 음악의 주선율(Melody)에 맞춰 변환하고 합성할 수 있게 해주는 **차세대 AI 음성 합성 플랫폼**입니다. 

사용자가 복잡한 DAW(Digital Audio Workstation)나 음악적 지식 없이도, 단 몇 번의 클릭만으로 고품질의 AI 커버 곡이나 창의적인 오디오 콘텐츠를 제작할 수 있는 환경을 제공합니다.

---

## 2. 핵심 기능 (Key Features)

### 🎼 지능형 멜로디 분석 및 추출
- **주파수 분석**: 업로드된 음악 파일에서 보컬 또는 주선율의 주파수(F0)를 실시간으로 추적합니다.
- **데이터 시각화**: 추천된 피치 라인을 분석하여 변환의 기초가 되는 '멜로디 맵'을 생성합니다.

### 🎤 실시간 피치 시프팅 (Pitch Shifting)
- **PSOLA 알고리즘**: 오디오의 시간적 길이는 유지하면서 음높이만 자연스럽게 변경하는 PSOLA(Pitch Synchronous Overlap and Add) 기술을 적용하여 목소리의 왜곡을 최소화합니다.
- **세그먼트 매칭**: 음악의 흐름에 따라 100ms 단위로 목소리의 피치를 정밀하게 조정하여 박자와 음정에 완벽히 대응합니다.

### 🤖 RVC AI 엔진 연동
- **음색 변환**: 단순히 음높이만 바꾸는 것을 넘어, Hugging Face Spaces와의 API 연동을 통해 RVC(Retrieval-based Voice Conversion) 모델을 적용할 수 있습니다. 이를 통해 사용자의 목소리를 유명 가수나 특정 캐릭터의 음색으로 완벽하게 변환합니다.
- **무료 서버 리소스 활용**: 고가의 GPU 서버 없이도 클라우드 기반의 무료 API를 활용하여 고품질의 변환 결과를 무료로 제공합니다.

### 🎚️ 프로페셔널 믹싱 콘솔
- **실시간 볼륨 밸런싱**: 배경음악(Instrumental)과 변환된 목소리의 볼륨을 개별 컨트롤하여 최적의 믹싱 상태를 구현합니다.
- **자동 정규화 (Normalization)**: 여러 오디오 소스가 합쳐질 때 발생하는 클리핑(음 깨짐) 현상을 방지하기 위해 전체 오디오 레벨을 자동으로 최적화합니다.

---

## 3. 작동 원리 (Technical Mechanism)

### Step 1: 오디오 디코딩 및 전처리
브라우저의 `Web Audio API`를 사용하여 MP3/WAV 파일을 오디오 버퍼로 변환합니다. 이때 보이스 샘플은 분석 효율을 위해 모노(Mono) 채널로 변환 처리됩니다.

### Step 2: 멜로디 추출 (Melody Extraction)
`Tone.js` 기반의 분석기와 주파수 추적 알고리즘을 통해 음악의 각 시간대별 목표 주파수(Hz)를 추출합니다. 이 데이터는 피치 변환의 '가이드라인' 역할을 합니다.

### Step 3: 보이스 루핑 및 매칭 (Voice Looping)
사용자가 올린 짧은 보이스 샘플을 음악 전체 길이에 맞춰 지능적으로 반복(Loop) 배열합니다. 이때 각 루프의 연결 부위는 크로스페이드(Crossfade) 처리를 통해 끊김 없이 자연스럽게 이어집니다.

### Step 4: 동적 피치 변환 (Dynamic Transformation)
추출된 멜로디 가이드에 따라 보이스 샘플의 음높이를 실시간으로 계산합니다.
- 계산식: `세미톤 차이 = 12 * log2(타겟 주파수 / 보이스 기본 주파수)`
이 계산 결과를 바탕으로 PSOLA 또는 Soundtouch 엔진이 오디오 조각들을 실시간으로 재구성합니다.

### Step 5: 최종 렌더링 및 다운로드
모든 처리가 완료되면 배경음악과 합성된 목소리를 하나의 스테레오 오디오 파일로 병합하고, 이를 WAV/MP3 형식의 Blob 데이터로 변환하여 사용자가 즉시 다운로드할 수 있게 합니다.

---

## 4. 디자인 컨셉 (UI/UX Design)

### 시각적 테마: **"Holographic Cyberpunk"**
- **미래지향적 인터페이스**: 다크 모드를 기반으로 네온 퍼플, 블루, 핑크 그라데이션을 사용해 AI 기술의 첨단 이미지를 강조했습니다.
- **글래스모피즘 (Glassmorphism)**: 반투명한 유리 질감의 UI 요소와 홀로그래픽 Crystal 장식을 배치하여 프리미엄한 사용자 경험을 제공합니다.
- **인터랙티브 애니메이션**: 파일 업로드 및 처리 과정에서 실시간으로 반응하는 테크니컬 바(Bar)와 라인 애니메이션을 통해 시각적 즐거움을 더했습니다.

---

## 5. 활용 사례 (Use Cases)

1. **AI 커버 제작**: 좋아하는 가수의 목소리 모델을 사용하여 특정 노래를 부르게 함.
2. **개인화된 벨소리/알람**: 본인의 목소리를 멜로디에 얹어 세상에 하나뿐인 알람음 제작.
3. **콘텐츠 제작**: 유튜브, 틱톡 등 숏폼 영상에 사용할 창의적이고 유머러스한 오디오 소스 생성.
4. **음악 교육**: 음치 교정이나 멜로디 감각 익히기를 위한 분석 도구로 활용.

---

## 6. 향후 발전 계획 (Roadmap)

- **보컬 분리 기능 내장**: 음악 파일에서 가수의 목소리만 따로 제거해주는 기능을 브라우저 내에서 구현.
- **멀티 모델 지원**: 여러 명의 AI 목소리를 선택하고 곡의 파트별로 다른 목소리를 지정하는 기능.
- **실시간 녹음 연동**: 브라우저에서 직접 목소리를 녹음하여 즉시 변환하는 워크플로우 강화.

---
**Pitch Mixer**는 기술과 예술의 경계를 허물고, 누구나 음악적 창의성을 발휘할 수 있는 세상을 꿈꿉니다.
